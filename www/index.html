<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Custom HTTP/HTTPS Server</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            min-height: 100vh;
        }
        .container {
            background: rgba(255, 255, 255, 0.1);
            padding: 30px;
            border-radius: 10px;
            backdrop-filter: blur(10px);
        }
        h1 {
            text-align: center;
            margin-bottom: 30px;
        }
        .feature {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            margin: 10px 0;
            border-radius: 5px;
        }
        .status {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: rgba(0, 255, 0, 0.2);
            padding: 10px;
            border-radius: 5px;
            margin: 20px 0;
        }
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        .stat-box {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 5px;
            text-align: center;
        }
        .test-buttons {
            display: flex;
            gap: 10px;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        button {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            transition: background 0.3s;
        }
        button:hover {
            background: #45a049;
        }
        .log {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 5px;
            font-family: monospace;
            font-size: 14px;
            max-height: 200px;
            overflow-y: auto;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ðŸš€ Custom HTTP/HTTPS Server</h1>
        
        <div class="status">
            <span><strong>Server Status:</strong> âœ… Running</span>
            <span id="timestamp"></span>
        </div>
        
        <div class="feature">
            <h3>ðŸ”§ Server Features</h3>
            <ul>
                <li>âœ… HTTP/1.1 and HTTPS support</li>
                <li>âœ… High-performance epoll-based I/O</li>
                <li>âœ… SSL/TLS encryption (TLS 1.2+)</li>
                <li>âœ… Static file serving with caching</li>
                <li>âœ… Reverse proxy with load balancing</li>
                <li>âœ… Rate limiting and DDoS protection</li>
                <li>âœ… Gzip compression</li>
                <li>âœ… Security headers</li>
                <li>âœ… Hot configuration reload</li>
                <li>âœ… Comprehensive logging</li>
            </ul>
        </div>
        
        <div class="stats">
            <div class="stat-box">
                <h4>Connections</h4>
                <div id="connections">-</div>
            </div>
            <div class="stat-box">
                <h4>Requests Served</h4>
                <div id="requests">-</div>
            </div>
            <div class="stat-box">
                <h4>Cache Hits</h4>
                <div id="cache-hits">-</div>
            </div>
            <div class="stat-box">
                <h4>Uptime</h4>
                <div id="uptime">-</div>
            </div>
        </div>
        
        <div class="feature">
            <h3>ðŸ§ª Test Features</h3>
            <div class="test-buttons">
                <button onclick="testGet()">Test GET</button>
                <button onclick="testPost()">Test POST</button>
                <button onclick="testSSL()">Test HTTPS</button>
                <button onclick="testProxy()">Test Proxy</button>
                <button onclick="testCompression()">Test Gzip</button>
                <button onclick="testSecurity()">Test Security</button>
            </div>
        </div>
        
        <div class="log" id="log">
            <div>Server log will appear here...</div>
        </div>
    </div>
    
    <script>
        // Update timestamp
        function updateTimestamp() {
            document.getElementById('timestamp').textContent = new Date().toLocaleString();
        }
        setInterval(updateTimestamp, 1000);
        updateTimestamp();
        
        // Log function
        function log(message) {
            const logElement = document.getElementById('log');
            const time = new Date().toLocaleTimeString();
            logElement.innerHTML += `<div>[${time}] ${message}</div>`;
            logElement.scrollTop = logElement.scrollHeight;
        }
        
        // Test functions
        async function testGet() {
            log('Testing GET request...');
            try {
                const response = await fetch('/');
                log(`GET / - Status: ${response.status} ${response.statusText}`);
            } catch (error) {
                log(`GET / - Error: ${error.message}`);
            }
        }
        
        async function testPost() {
            log('Testing POST request...');
            try {
                const response = await fetch('/', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({test: 'data'})
                });
                log(`POST / - Status: ${response.status} ${response.statusText}`);
            } catch (error) {
                log(`POST / - Error: ${error.message}`);
            }
        }
        
        async function testSSL() {
            log('Testing HTTPS connection...');
            try {
                const response = await fetch('https://localhost:8443/');
                log(`HTTPS / - Status: ${response.status} ${response.statusText}`);
            } catch (error) {
                log(`HTTPS / - Error: ${error.message}`);
            }
        }
        
        async function testProxy() {
            log('Testing proxy endpoint...');
            try {
                const response = await fetch('/api/test');
                log(`GET /api/test - Status: ${response.status} ${response.statusText}`);
            } catch (error) {
                log(`GET /api/test - Error: ${error.message}`);
            }
        }
        
        async function testCompression() {
            log('Testing gzip compression...');
            try {
                const response = await fetch('/', {
                    headers: {'Accept-Encoding': 'gzip, deflate'}
                });
                const encoding = response.headers.get('Content-Encoding');
                log(`Compression test - Content-Encoding: ${encoding || 'none'}`);
            } catch (error) {
                log(`Compression test - Error: ${error.message}`);
            }
        }
        
        async function testSecurity() {
            log('Testing security headers...');
            try {
                const response = await fetch('/');
                const xss = response.headers.get('X-XSS-Protection');
                const frame = response.headers.get('X-Frame-Options');
                const content = response.headers.get('X-Content-Type-Options');
                log(`Security headers - XSS: ${xss}, Frame: ${frame}, Content: ${content}`);
            } catch (error) {
                log(`Security test - Error: ${error.message}`);
            }
        }
        
        // Initial log
        log('Custom HTTP/HTTPS Server demo page loaded');
        log('Click the test buttons to verify server functionality');
    </script>
</body>
</html>